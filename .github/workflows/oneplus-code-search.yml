name: OnePlus Source Code Device Tree Search (Deubug)

on:
  workflow_dispatch:

jobs:
  fetch-and-search:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout this repo
        uses: actions/checkout@v4

      - name: Clone OnePlus kernel source
        run: |
          # 修改为你需要的 OnePlus 源码仓库
          REPO_URL="https://github.com/OnePlusOSS/android_kernel_oneplus_sm8750.git"
          git clone --depth=1 $REPO_URL oneplus_kernel

      - name: Search for version_type references
        run: |
          cd oneplus_kernel
          echo "========= 查找 version_type 相关 ========="
          grep -rn "version_type" . || true
          echo "========= 查找 of_property_read_string ========="
          grep -rn "of_property_read_string" . || true
          echo "========= 查找 HMBIRD ========="
          grep -rn "HMBIRD" . || true